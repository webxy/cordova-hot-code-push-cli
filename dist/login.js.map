{"version":3,"sources":["../src/login.js"],"names":[],"mappings":";;;;;;;;;oBAAiB,MAAM;;;;sBACJ,QAAQ;;;;kBACZ,IAAI;;;;qBAEiB,SAAS;;AAE7C,IAAM,UAAU,GAAG,kBAAK,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,kBAAkB,CAAC,CAAC;AAChE,IAAM,SAAS,GAAG,kBAAK,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,YAAY,CAAC,CAAC;;AAEzD,IAAM,MAAM,GAAG;AACb,YAAU,EAAE;AACV,OAAG,EAAE;AACH,iBAAW,EAAE,sBAAsB;AACnC,aAAO,EAAE,8CAA8C;AACvD,cAAQ,EAAE,IAAI;KACf;AACD,UAAM,EAAE;AACN,iBAAW,EAAE,0BAA0B;AACvC,aAAO,EAAE,2CAA2C;AACpD,cAAQ,EAAE,IAAI;KACf;GACF;CACF,CAAC;;AAEK,SAAS,OAAO,CAAC,OAAO,EAAE;AAC/B,gBAAc,EAAE,CAAC;;AAEjB,sBAAO,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC;AAC/B,sBAAO,OAAO,GAAG,gBAAgB,CAAC;AAClC,sBAAO,SAAS,GAAG,IAAI,CAAC;AACxB,sBAAO,KAAK,EAAE,CAAC;;AAEf,4CAAiB,MAAM,CAAC,CACrB,IAAI,CAAC,UAAA,OAAO;WAAI,sBAAU,SAAS,EAAE,OAAO,CAAC;GAAA,CAAC,CAC9C,IAAI,CAAC,IAAI,CAAC,CAAC;CACf;;AAED,SAAS,cAAc,GAAG;AACxB,MAAI,MAAM,YAAA,CAAC;;AAEX,MAAI;AACF,UAAM,GAAG,gBAAG,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;GAC9C,CAAC,OAAM,CAAC,EAAE;AACT,WAAO,CAAC,GAAG,CAAC,8DAA8D,CAAC,CAAC;AAC5E,WAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;GACjB;;AAED,MAAI,CAAC,MAAM,EAAE;AACX,WAAO,CAAC,GAAG,CAAC,4EAA4E,CAAC,CAAC;AAC1F,WAAO,CAAC,GAAG,CAAC,yEAAyE,CAAC,CAAC;AACvF,WAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;GACjB;CACF;;AAED,SAAS,IAAI,CAAC,GAAG,EAAE;AACjB,MAAI,GAAG,EAAE;AACP,WAAO,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;GACzB;;AAED,SAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC,CAAC;AACtE,SAAO,CAAC,GAAG,CAAC,8CAA8C,CAAC,CAAC;AAC5D,SAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;CACtD","file":"login.js","sourcesContent":["import path from 'path';\nimport prompt from 'prompt';\nimport fs from 'fs';\n\nimport { getInput, writeFile } from './utils';\n\nconst configFile = path.join(process.cwd(), 'cordova-hcp.json');\nconst loginFile = path.join(process.cwd(), '.chcplogin');\n\nconst schema = {\n  properties: {\n    key: {\n      description: 'Amazon Access Key Id',\n      message: 'You need to provide the Amazon Access Key Id',\n      required: true,\n    },\n    secret: {\n      description: 'Amazon Secret Access Key',\n      message: 'You need to provide the Secret Access Key',\n      required: true,\n    },\n  },\n};\n\nexport function execute(context) {\n  validateConfig();\n\n  prompt.override = context.argv;\n  prompt.message = 'Please provide';\n  prompt.delimiter = ': ';\n  prompt.start();\n\n  getInput(prompt, schema)\n    .then(content => writeFile(loginFile, content))\n    .then(done);\n}\n\nfunction validateConfig() {\n  let config;\n\n  try {\n    config = fs.readFileSync(configFile, 'utf8');\n  } catch(e) {\n    console.log('Cannot parse cordova-hcp.json. Did you run cordova-hcp init?');\n    process.exit(0);\n  }\n\n  if (!config) {\n    console.log('You need to run \"cordova-hcp init\" before you can run \"cordova-hcp login\".');\n    console.log('Both commands needs to be invoked in the root of the project directory.');\n    process.exit(0); // eslint-disable-line no-process-exit\n  }\n}\n\nfunction done(err) {\n  if (err) {\n    return console.log(err);\n  }\n\n  console.log('Project initialized and .chcindex.plogin file created.');\n  console.log('You SHOULD add .chcplogin to your .gitignore');\n  console.log('( echo \\'.chcplogin\\' >> .gitignore )');\n}\n"]}